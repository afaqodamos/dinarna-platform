
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>dinarnna | ØªØ³Ø¬ÙŠÙ„ + Ø¹Ø¬Ù„Ø© Ø­Ø¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Cairo', sans-serif; background: #f0f0f0; text-align: center; padding: 30px; }
    .input { padding: 10px; margin: 5px; width: 80%; border-radius: 5px; border: 1px solid #ccc; }
    button {
      background-color: #27ae60;
      color: white;
      border: none;
      padding: 12px 25px;
      font-size: 16px;
      border-radius: 8px;
      margin: 10px;
      cursor: pointer;
    }
    #mainApp { display: none; }
  </style>
</head>
<body>

<div id="authSection">
  <h2>Ù…Ù†ØµØ© dinarna</h2>
  <div id="loginBox">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
    <input id="loginUser" placeholder="ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="input"><br>
    <input id="loginPass" placeholder="ğŸ” ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" type="password" class="input"><br>
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <p>Ù„Ø§ ØªÙ…Ù„Ùƒ Ø­Ø³Ø§Ø¨ØŸ <a href="#" onclick="toggleRegister()">Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†</a></p>
    <p id="loginError" style="color:red;"></p>
  </div>

  <div id="registerBox" style="display:none;">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h3>
    <input id="regUser" placeholder="ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="input"><br>
    <input id="regPass" placeholder="ğŸ” ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" type="password" class="input"><br>
    <button onclick="register()">ØªØ³Ø¬ÙŠÙ„</button>
    <p>Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a href="#" onclick="toggleLogin()">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</a></p>
    <p id="registerError" style="color:red;"></p>
  </div>
</div>

<div id="mainApp">
  <h2>ğŸ‘¤ Ù…Ø±Ø­Ø¨Ù‹Ø§ <span id="username">-</span></h2>
  <p>ğŸ’° Ø±ØµÙŠØ¯Ùƒ: <span id="points">0</span> Ø¯ÙŠÙ†Ø§Ø±</p>
<button onclick="showWithdraw()" style="background:#8e44ad;">ğŸ’¸ Ø³Ø­Ø¨ Ø§Ù„Ø±ØµÙŠØ¯</button>
<br>
<button onclick="window.location.href='https://t.me/mrdinary'" style="background:#2980b9; color:white; padding:10px 20px; border:none; border-radius:10px; margin-top:10px;">ğŸ“© ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø¯ÙŠØ± Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙƒÙˆØ¯ Ø´Ø­Ù† (@mrdinary)</button>
  <button onclick="spin()">ğŸ¯ Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© (1000 Ø¯ÙŠÙ†Ø§Ø±)</button>
<button onclick="document.getElementById('rechargeBox').style.display='block'" style="background:#f39c12;">âš¡ ØªØ´ØºÙŠÙ„ ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù†</button>
  <div id="result" style="font-size:18px; margin-top:20px;"></div>
  <br><button onclick="logout()" style="background:#c0392b;">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<script>
  const BOT_TOKEN = "357723373:AAHz5-Mj8GWT1NMKTmicYHq8aMDq6BJgMeM";
  const ADMIN_ID = "250273112";
  const prizes = [
    ...Array(20).fill("Ø­Ø¸ Ø£ÙˆÙØ±"),
    ...Array(10).fill("250 Ø¯ÙŠÙ†Ø§Ø±"),
    ...Array(8).fill("500 Ø¯ÙŠÙ†Ø§Ø±"),
    ...Array(5).fill("1000 Ø¯ÙŠÙ†Ø§Ø±"),
    ...Array(3).fill("2000 Ø¯ÙŠÙ†Ø§Ø±"),
    ...Array(1).fill("10000 Ø¯ÙŠÙ†Ø§Ø±"),
    ...Array(1).fill("15000 Ø¯ÙŠÙ†Ø§Ø±"),
    ...Array(1).fill("50000 Ø¯ÙŠÙ†Ø§Ø±")
  ];

  function toggleRegister() {
    document.getElementById("loginBox").style.display = "none";
    document.getElementById("registerBox").style.display = "block";
  }

  function toggleLogin() {
    document.getElementById("registerBox").style.display = "none";
    document.getElementById("loginBox").style.display = "block";
  }

  function register() {
    const username = document.getElementById("regUser").value.trim();
    const password = document.getElementById("regPass").value.trim();
    const errorBox = document.getElementById("registerError");
    if (!username || !password) return errorBox.innerText = "ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„";

    if (localStorage.getItem("deviceRegistered")) {
      return errorBox.innerText = "âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙƒØ«Ø± Ù…Ù† Ø­Ø³Ø§Ø¨ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø².";
    }

    let users = JSON.parse(localStorage.getItem("users") || "{}");
    
    let reservedNames = JSON.parse(localStorage.getItem("validUsernamesGlobal") || "[]");
    if (users[username] || reservedNames.includes(username)) {
      return errorBox.innerText = "ğŸ“› Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¬ÙˆØ² Ø¨Ø§Ù„ÙØ¹Ù„.";
    }
    reservedNames.push(username);
    localStorage.setItem("validUsernamesGlobal", JSON.stringify(reservedNames));
    

    users[username] = { password: password, points: 1000 };
    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("deviceRegistered", "yes");
    localStorage.setItem("currentUser", username);
    startApp();
    startApp();
  }

  function login() {
    const username = document.getElementById("loginUser").value.trim();
    const password = document.getElementById("loginPass").value.trim();
    const errorBox = document.getElementById("loginError");

    let users = JSON.parse(localStorage.getItem("users") || "{}");
    if (!users[username] || users[username].password !== password) {
      return errorBox.innerText = "âŒ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
    }

    localStorage.setItem("currentUser", username);
    startApp();
    startApp();
  }

  function startApp() {
    document.getElementById("authSection").style.display = "none";
    document.getElementById("mainApp").style.display = "block";
    const user = localStorage.getItem("currentUser");
    const users = JSON.parse(localStorage.getItem("users") || "{}");
    document.getElementById("username").innerText = user;
    document.getElementById("points").innerText = users[user].points;
    sendToBot("ğŸ”Œ Ø¥Ø¹Ø§Ø¯Ø© Ø´Ø­Ù†\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: " + user + "\nğŸ’³ Ø§Ù„ÙƒÙˆØ¯: " + code + "\nğŸ’° Ø§Ù„Ù‚ÙŠÙ…Ø©: " + validCodes[code]);
  }

  function spin() {
    let users = JSON.parse(localStorage.getItem("users") || "{}");
    let user = localStorage.getItem("currentUser");

    if (users[user].points < 1000) {
      alert("âŒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ 1000 Ø¯ÙŠÙ†Ø§Ø± Ù„Ù„ÙØ©!");
      return;
    }

    users[user].points -= 1000;

    const prize = prizes[Math.floor(Math.random() * prizes.length)];
    if (prize.includes("Ø¯ÙŠÙ†Ø§Ø±")) {
      let value = parseInt(prize.replace(" Ø¯ÙŠÙ†Ø§Ø±", ""));
      users[user].points += value;
    }

    localStorage.setItem("users", JSON.stringify(users));
    document.getElementById("points").innerText = users[user].points;
    sendToBot("ğŸ”Œ Ø¥Ø¹Ø§Ø¯Ø© Ø´Ø­Ù†\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: " + user + "\nğŸ’³ Ø§Ù„ÙƒÙˆØ¯: " + code + "\nğŸ’° Ø§Ù„Ù‚ÙŠÙ…Ø©: " + validCodes[code]);
    document.getElementById("result").innerHTML = "ğŸ Ù†ØªÙŠØ¬ØªÙƒ: <strong>" + prize + "</strong>";
    sendToBot(`ğŸ° Ù„ÙØ© Ø¹Ø¬Ù„Ø©:
ğŸ‘¤ ${user}
ğŸ ${prize}`);
  }

  function logout() {
    localStorage.removeItem("currentUser");
    location.reload();
  }

  function sendToBot(msg) {
    fetch("https://api.telegram.org/bot" + BOT_TOKEN + "/sendMessage", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ chat_id: ADMIN_ID, text: msg })
    });
  }

  // ØªØ­Ù…ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ø°Ø§ Ø³Ø¨Ù‚ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  window.onload = function() {
      let users = JSON.parse(localStorage.getItem("users") || "{}");
      if (!users["dev"]) {
        users["dev"] = { password: "1234", points: 10000 };
        localStorage.setItem("users", JSON.stringify(users));
      }
    
    const current = localStorage.getItem("currentUser");
    if (current) startApp();
  }
</script>


<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø³Ø­Ø¨ -->
<div id="withdrawBox" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5);">
  <div style="background:#fff; max-width:400px; margin:100px auto; padding:20px; border-radius:15px;">
    <h3>ğŸ’¸ Ø·Ù„Ø¨ Ø³Ø­Ø¨</h3>
    <input id="withdrawPhone" placeholder="ğŸ“± Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="input"><br>
    <input id="withdrawAmount" type="number" placeholder="ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº" class="input"><br>
    <button onclick="submitWithdraw()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
    <button onclick="document.getElementById('withdrawBox').style.display='none';" style="background:#999;">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
    <p id="withdrawStatus" style="color:red;"></p>
  </div>
</div>

<script>
  function showWithdraw() {
    document.getElementById("withdrawBox").style.display = "block";
    document.getElementById("withdrawStatus").innerText = "";
  }

  function submitWithdraw() {
    const phone = document.getElementById("withdrawPhone").value.trim();
    const amount = parseInt(document.getElementById("withdrawAmount").value.trim());
    const status = document.getElementById("withdrawStatus");
    let users = JSON.parse(localStorage.getItem("users") || "{}");
    let user = localStorage.getItem("currentUser");

    if (!phone || isNaN(amount) || amount < 10000) {
      status.innerText = "âŒ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨ Ù‡Ùˆ 10000 Ø¯ÙŠÙ†Ø§Ø±";
      return;
    }

    if (users[user].points < amount) {
      status.innerText = "âŒ Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ";
      return;
    }

    users[user].points -= amount;
    localStorage.setItem("users", JSON.stringify(users));
    document.getElementById("points").innerText = users[user].points;
    sendToBot("ğŸ”Œ Ø¥Ø¹Ø§Ø¯Ø© Ø´Ø­Ù†\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: " + user + "\nğŸ’³ Ø§Ù„ÙƒÙˆØ¯: " + code + "\nğŸ’° Ø§Ù„Ù‚ÙŠÙ…Ø©: " + validCodes[code]);
    status.style.color = "green";
    status.innerText = "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨";
    document.getElementById("withdrawBox").style.display = "none";

    sendToBot(`ğŸ“¤ Ø·Ù„Ø¨ Ø³Ø­Ø¨:
ğŸ‘¤ ${user}
ğŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${phone}
ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${amount} Ø¯ÙŠÙ†Ø§Ø±`);
  }
</script>

<!-- Ø²Ø± ÙØªØ­ Ø§Ù„Ø³Ø­Ø¨ -->
<br>

<!-- Ù†Ø§ÙØ°Ø© ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù† -->
<div id="rechargeBox" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5);">
  <div style="background:#fff; max-width:400px; margin:100px auto; padding:20px; border-radius:15px;">
    <h3>ğŸ” ØªÙØ¹ÙŠÙ„ ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù†</h3>
    <input id="rechargeCode" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù† Ù‡Ù†Ø§" class="input"><br>
    <button onclick="applyRechargeCode()">âœ… ØªÙØ¹ÙŠÙ„</button>
    <button onclick="document.getElementById('rechargeBox').style.display='none'" style="background:#999;">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
    <p id="rechargeResult" style="color:red;"></p>
  </div>
</div>

<script>
  function applyRechargeCode() {
    const code = document.getElementById("rechargeCode").value.trim();
    const user = localStorage.getItem("currentUser");
    const usedCodes = JSON.parse(localStorage.getItem("usedRechargeCodes") || "[]");
    const fixedCodes = { "vp5000": 5000, "vpp10000": 10000 };
    const validCodes = Object.assign({}, fixedCodes, JSON.parse(localStorage.getItem("validRechargeCodesGlobal") || "{}"));
    let users = JSON.parse(localStorage.getItem("users") || "{}");
    const result = document.getElementById("rechargeResult");

    if (usedCodes.includes(code + "_" + user)) {
      result.innerText = "âŒ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø³Ø¨Ù‚Ù‹Ø§";
      return;
    }

    if (validCodes[code]) {
      users[user].points += validCodes[code];
      usedCodes.push(code + "_" + user);
      localStorage.setItem("users", JSON.stringify(users));
      localStorage.setItem("usedRechargeCodes", JSON.stringify(usedCodes));
      document.getElementById("points").innerText = users[user].points;
    sendToBot("ğŸ”Œ Ø¥Ø¹Ø§Ø¯Ø© Ø´Ø­Ù†\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: " + user + "\nğŸ’³ Ø§Ù„ÙƒÙˆØ¯: " + code + "\nğŸ’° Ø§Ù„Ù‚ÙŠÙ…Ø©: " + validCodes[code]);
      result.style.color = "green";
      result.innerText = "âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© " + validCodes[code] + " Ø¯ÙŠÙ†Ø§Ø±";
    } else {
      result.innerText = "âŒ ÙƒÙˆØ¯ ØºÙŠØ± ØµØ§Ù„Ø­";
    }
  }
</script>

</body>

</html>
